<html>
  <head>
    <meta charset="utf-8" />
    <title>TimeLine</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <meta
      name="description"
      content="Know when all your friends, colleagues and family are"
    />
    <meta name="keywords" content="timeline, clock, timezone" />
    <link rel="shortcut icon" type="image/png" href="favicon.png" />
    <style>
      body {
        width: 100%;
        display: flex;
        flex-direction: column;
        min-height: calc(100vh + 50px);
        padding: 0px;
        margin: 0px;
        color: black;
        background: linear-gradient(to bottom right, #fbfbfb, #f3f3f3);
        font-family: "Helvetica", sans-serif;
      }

      main {
        flex-grow: 1;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-flow: row-reverse;
      }

      .illustration {
        flex: 1;
        display: flex;
        justify-content: flex-end;
        padding-right: 64px;
      }

      .description {
        flex: 1;
        padding-left: 64px;
      }

      .right_container {
        margin-top: -16px;
      }

      .app_screen {
        width: 300px;
        height: 568px;
        background: black;
        border-radius: 16px;
        box-shadow: 64px 64px 144px rgba(0, 0, 0, 0.2);
      }

      .title {
        font-size: 64px;
        font-weight: 900;
        line-height: 56px;
        text-shadow: 32px 32px 96px rgba(0, 0, 0, 0.1);
      }

      .desc {
        color: #525252;
        font-size: 18px;
        line-height: 26px;
        width: 280px;
        margin-top: 44px;
        margin-bottom: 52px;
      }

      .download_the_app_btn {
        width: 243px;
        height: 72px;
        background: url("./app_store_btn.svg");
        background-color: transparent;
        background-repeat: no-repeat;
        background-size: 100%;
        display: block;
        box-shadow: 32px 32px 96px rgba(0, 0, 0, 0.1);
      }

      @media (max-width: 1024px) {
        .illustration {
          align-items: center;
        }
        .container {
          align-items: center;
        }
      }

      @media (max-width: 900px) {
        .illustration {
          padding: 0;
        }

        .app_screen {
          box-shadow: 48px 48px 96px rgba(0, 0, 0, 0.1);
        }
      }

      @media (max-width: 750px) {
        main {
          display: block;
        }

        .title {
          text-align: center;
        }

        .illustration {
          padding: 30px 0;
          justify-content: center;
        }
        .description {
          padding-left: 0;
          padding-top: 96px;
        }
        .desc {
          text-align: center;
        }

        .right_container {
          margin: 0;
          align-items: center;
          justify-content: center;
          width: 100%;
          display: flex;
          flex-flow: column;
        }
        .app_screen {
          margin-top: 30px;
          margin-bottom: 60px;
        }

        .download_the_app_btn {
          display: block;
        }
      }

      footer {
        display: flex;
        justify-content: space-evenly;
        align-items: center;
        flex: 0 0 50px;
        height: 50px;
        padding: 0 50px;
        opacity: 0.6;
      }

      footer a {
        color: black;
      }
    </style>
  </head>
  <body>
    <main>
      <div class="description">
        <div class="right_container">
          <div class="title">TimeLine</div>
          <div class="desc">
            Know <strong><em>when</em></strong> all your friends, colleagues,
            and family are.
          </div>
          <a
            href="https://testflight.apple.com/join/bE2a0E8C"
            class="download_the_app_btn"
          ></a>
        </div>
      </div>
      <div class="illustration">
        <svg
          class="app_screen"
          width="300px"
          height="568px"
          viewBox="0 0 300 568"
          xmlns="http://www.w3.org/2000/svg"
        >
          <image href="./ios_screen.png" width="300" height="568" />
          <text id="mainTime" font-size="12" x="27" y="20" fill="white">
            7:50 PM
          </text>
          <path
            id="curve1"
            d="M122 138 l43 0 c0 0 20 -18 45 -18 c25 0 45 18 45 18 l21 0"
            fill="transparent"
            stroke="black"
            stroke-width="1.5"
          />
          <g id="circle1">
            <circle cx="0" cy="0" r="3" fill="black" />
            <text id="text1" font-size="12" x="5" y="-10">7:50 PM</text>
          </g>
          <path
            id="curve2"
            d="M122 204 l43 0 c0 0 15 -18 35 -18 c20 0 35 18 35 18 l41 0"
            fill="transparent"
            stroke="black"
            stroke-width="1.5"
          />
          <g id="circle2">
            <circle cx="0" cy="0" r="3" fill="black" />
            <text id="text2" font-size="12" x="5" y="-10">7:50 PM</text>
          </g>
          <path
            id="curve3"
            d="M122 271 l30 0 c0 0 20 -18 45 -18 c25 0 45 18 45 18 l34 0"
            fill="transparent"
            stroke="black"
            stroke-width="1.5"
          />
          <g id="circle3">
            <circle cx="0" cy="0" r="3" fill="black" />
            <text id="text3" font-size="12" x="5" y="-10">7:50 PM</text>
          </g>
        </svg>
      </div>
    </main>
    <footer>
      <div>
        Made with â™¡ by
        <a href="https://twitter.com/mathieudutour" target="_blank">Mathieu</a>
      </div>
      <div>
        <a href="https://github.com/mathieudutour/TimeLine" target="_blank"
          >Open source</a
        >
      </div>
    </footer>
  </body>
  <script>
    var counter = 0;

    var text0 = document.getElementById("mainTime");
    var curve1 = document.getElementById("curve1");
    var circle1 = document.getElementById("circle1");
    var text1 = document.getElementById("text1");
    var curve2 = document.getElementById("curve2");
    var circle2 = document.getElementById("circle2");
    var text2 = document.getElementById("text2");
    var curve3 = document.getElementById("curve3");
    var circle3 = document.getElementById("circle3");
    var text3 = document.getElementById("text3");

    var curve1Length = curve1.getTotalLength();
    var curve2Length = curve2.getTotalLength();
    var curve3Length = curve3.getTotalLength();

    function getTime(fraction, withoutPrefix) {
      var seconds = 24 * 3600 * fraction;
      var hours = Math.floor(seconds / 3600);
      var minutes = Math.floor((seconds - hours * 3600) / 60);
      var suffix = "AM";
      if (hours > 12) {
        suffix = "PM";
        hours -= 12;
      }
      return (
        hours +
        ":" +
        (minutes < 10 ? "0" + minutes : minutes) +
        (withoutPrefix ? "" : " " + suffix)
      );
    }

    function updateElement(text, circle, curve, time) {
      text.textContent = getTime(time);

      var curveLength = curve.getTotalLength();

      var x = curve.getPointAtLength(time * curveLength).x;

      circle.setAttribute(
        "transform",
        "translate(" +
          x +
          "," +
          curve.getPointAtLength(time * curveLength).y +
          ")"
      );

      if (time < 0.5) {
        if (x - text.clientWidth < 122) {
          text.setAttribute("transform", "translate(" + (118 - x) + ", 0)");
        } else {
          text.setAttribute(
            "transform",
            "translate(-" + text.clientWidth + ", 0)"
          );
        }
      } else {
        if (x + text.clientWidth > 278) {
          text.setAttribute(
            "transform",
            "translate(" + (283 - x - text.clientWidth) + ", 0)"
          );
        } else {
          text.setAttribute("transform", "translate(0, 0)");
        }
      }
    }

    function moveTime() {
      counter += 0.0015;

      var time1 = (0.45 + counter) % 1;
      var time2 = (0.08 + counter) % 1;
      var time3 = (0.74 + counter) % 1;

      text0.textContent = getTime(time1, true);

      updateElement(text1, circle1, curve1, time1);
      updateElement(text2, circle2, curve2, time2);
      updateElement(text3, circle3, curve3, time3);

      requestAnimationFrame(moveTime);
    }
    requestAnimationFrame(moveTime);
  </script>
</html>
